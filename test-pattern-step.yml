parameters:
- name: 'pattern'
  type: string
- name: 'files'
  type: string

steps:
- task: ExtractFiles@1
  inputs:
    archiveFilePatterns: ${{ parameters.pattern }}
    destinationFolder: 'files/'
    cleanDestinationFolder: true
    
- task: NodeJsExec@0
  inputs:
    cwd: '$(System.DefaultWorkingDirectory)'
    script: |
      const fs = require('fs');
      const extractedFiles = fs.readdirSync('./files').join(' ');
      if( extractedFiles !== ${{ parameters.files }}){
      	throw "Extracted files: " + extractedFiles + ", expected: " + ${{ parameters.files }};
      }
