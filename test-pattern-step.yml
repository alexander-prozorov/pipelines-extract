parameters:
- name: 'pattern'
  type: string
- name: 'files'
  type: string

steps:
- task: ExtractFiles@1
  inputs:
    archiveFilePatterns: ${{ parameters.pattern }}
    destinationFolder: 'files/'
    cleanDestinationFolder: true
    
- task: CmdLine@2
  inputs:
    script: |
      set extracted=$((ls files) -join ' ')
      if [ $extracted != ${{ parameters.files }} ]; then
        echo "Extracted fles: $extracted, expected: ${{ parameters.files }}"; exit 1;
      fi
