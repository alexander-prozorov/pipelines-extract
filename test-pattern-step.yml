parameters:
- name: 'pattern'
  type: string
- name: 'files'
  type: string

steps:
- task: ExtractFiles@1
  inputs:
    archiveFilePatterns: ${{ parameters.pattern }}
    destinationFolder: 'files/'
    cleanDestinationFolder: true
- task: CmdLine@2
  inputs:
    script: |
      extracted=$(ls files | xargs)
      printf "Pattern: %s, Extracted fles: %s\n" ${{ parameters.pattern }} "$extracted"
      if [ "$extracted" != ${{ parameters.files }} ]; then
        exit 1
      fi
